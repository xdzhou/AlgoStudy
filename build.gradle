subprojects {
    apply plugin: 'java'
    apply plugin: 'pmd'
    apply plugin: 'jacoco'

    task hello << { task -> println "I'm $task.project.name" }

    pmd {
        sourceSets = [sourceSets.main]
        reportsDir = file("$project.buildDir/reports/pmd")
        ruleSets = [
                'java-basic',
                'java-braces',
                //'java-clone',
                //'java-codesize',
                //'java-controversial',
                //'java-coupling',
                //'java-design',
                'java-empty',

                'java-finalizers',
                'java-imports',
                //'java-javabeans',
                //'java-junit',
                //'java-logging-java',
                //'java-naming',
                //'java-optimizations',
                'java-strictexception',
                'java-strings',
                'java-typeresolution',
                //'java-unnecessary',
                'java-unusedcode'

        ]
    }

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    repositories {
        mavenCentral()
    }

    allprojects {
        tasks.withType(JavaCompile) {
            options.compilerArgs << "-Xlint:deprecation"
        }
    }

    tasks.withType(Test) {
        scanForTestClasses = false
        include "**/*Test.class" // whatever Ant pattern matches your test class files
    }

    jacocoTestReport {
        reports {
            xml.enabled true
            html.enabled false
        }
    }

    sourceSets {
        main {
            java { srcDir "src/main/java" }
            resources { srcDir "src/main/resources" }
        }
        test {
            java { srcDir "src/test/java" }
            resources { srcDir "src/test/resources" }
        }
    }

    dependencies {
        testCompile 'org.testng:testng:6.9.6'
        testCompile 'org.mockito:mockito-core:2.7.22'

        compile 'com.google.guava:guava:21.0'
        compile 'com.google.errorprone:error_prone_annotations:2.0.15'
        compile 'org.slf4j:slf4j-log4j12:1.7.12'
        compile 'io.reactivex.rxjava2:rxjava:2.1.2'
    }
}

//AlgoLibrary Project specific stuff
project(':AlgoLibrary') {
}